<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ejercicio 14</title>
</head>
<!--
    27) Programa una clase llamada Pelicula.

La clase recibirá un objeto al momento de instanciarse con los siguentes datos: id de la película en IMDB, titulo, director, año de estreno, país o países de origen, géneros y calificación en IMBD.

  - Todos los datos del objeto son obligatorios.
  - Valida que el id IMDB tenga 9 caracteres, los primeros 2 sean letras y los  7 restantes números.

  - Valida que el título no rebase los 100 caracteres.
  - Valida que el director no rebase los 50 caracteres.

  - Valida que el año de estreno sea un número entero de 4 dígitos.

  - Valida que el país o paises sea introducidos en forma de arreglo.

  - Valida que los géneros sean introducidos en forma de arreglo.
  - Valida que los géneros introducidos esten dentro de los géneros 
     aceptados*.

  - Crea un método estático que devuelva los géneros aceptados*.

  - Valida que la calificación sea un número entre 0 y 10 pudiendo ser decimal de una posición.

  - Crea un método que devuelva toda la ficha técnica de la película.


  - Apartir de un arreglo con la información de 3 películas genera 3 
    instancias de la clase de forma automatizada e imprime la ficha técnica de cada película.

* Géneros Aceptados: Action, Adult, Adventure, Animation, Biography, Comedy, Crime, Documentary ,Drama, Family, Fantasy, Film Noir, Game-Show, History, Horror, Musical, Music, Mystery, News, Reality-TV, Romance, Sci-Fi, Short, Sport, Talk-Show, Thriller, War, Western.
-->
<body>
<script type="text/javascript">

    /*id de la película en IMDB, titulo, director, año de estreno, país o países de origen, géneros y calificación en IMBD*/

    class Pelicula{
        constructor(id,titulo,director,anoesDeEstreno,paisOrigen,generoPel,calificacion){
            this.id=id;
            this.titulo=titulo;
            this.director=director;
            this.anoesDeEstreno=anoesDeEstreno;
            this.paisOrigen=paisOrigen;
            this.generoPel=generoPel;
            this.calificacion=calificacion;
        }
        
        fichaTecnica(){
            return console.info(`${this.id}\n${this.titulo}\n${this.director}\n${this.anoesDeEstreno}\n${this.paisOrigen}\n${this.generoPel}\n${this.calificacion}`);
        }

        static generosAceptados(){
            console.info("Géneros Aceptados: Action, Adult, Adventure, Animation, Biography, Comedy, Crime, Documentary ,Drama, Family, Fantasy, Film Noir, Game-Show, History, Horror, Musical, Music, Mystery, News, Reality-TV, Romance, Sci-Fi, Short, Sport, Talk-Show, Thriller, War, Western.");
        }
    }




const validar=(id=undefined,titulo=undefined,director=undefined,anoesDeEstreno=undefined,paisOrigen=undefined,generoPel=undefined,calificacion=undefined)=>{

    if(id===undefined||titulo===undefined||director==undefined||anoesDeEstreno===undefined||paisOrigen===undefined||generoPel===undefined||calificacion===undefined) return console.warn("No esta definidos los parametros");

    if(!(typeof id=== "string")||!(typeof titulo === "string")||!(typeof director === "string")) return console.error("Deben ser cadenas de texto los siguientes parametros:");

    if(!(typeof anoesDeEstreno==="number")) return console.error(`El ${anoesDeEstreno} tiene que ser un número`);

    if(anoesDeEstreno<=1000||anoesDeEstreno>=10000) return console.error(`Los ${Math.round(anoesDeEstreno)} tiene que ser un número entero de cuatro digitos`);

    if(!/^[0-9]+([,][0-9]+)?$/.test(anoesDeEstreno.toString())) return console.error(`El ${anoesDeEstreno} tiene que ser un número entero`);

    if(!/([a-z]{2,})+([1-7]{7})/.test(id)||id.length>9||id.length<9) return console.error(`El id ${id} colocado tiene que ser de letras y números y de nueve caracteres`)

    if(titulo.length<=0)return console.error("El titulo no puede estar vacio")

    if(titulo.length>=100) return console.error(`El titulo: ${titulo} no debe sobrepasar los 100 caracteres`);

    if(director.length>=50) return console.error(`El nombre del director: ${director} no debe sobrepasar los 50 caracteres`);

    if(director.length<=0) return console.error("El nombre del director no tiene que estar vacio");

    if(!(paisOrigen instanceof Array)) return console.error(`El pais de origen: "${paisOrigen}" tiene que ser un array`);

    if(paisOrigen.length<=0)return console.warn("No esta definido el pais de origen");

    for(ele of paisOrigen){
        if(typeof ele!=="string") return console.error("Tiene que ser un string los nombres de los paises");
    }

    if(!(generoPel instanceof Array)) return console.error("Tiene que ser un array el genero");

     for(ele of generoPel){
        if(typeof ele!=="string") return console.error("Tiene que ser un string los nombres de genero: ",generoPel);

        if(!/(Action|Adult|Adventure|Animation|Biography|Comedy|Crime|Documentary|Drama|Family|Fantasy|Film Noir|Game|Show|History|Horror| Musical|Music|Mystery|News|Reality|TV|Romance|Sci-Fi|Short|Sport|Talk-Show|Thriller|War|Western){1,3}/i.test(ele)) return console.error(`Se debe seleccionar un genero disponible`);
    }

    //if(!/(Action|Adult|Adventure|Animation|Biography|Comedy|Crime|Documentary|Drama|Family|Fantasy|Film Noir|Game|Show|History|Horror| Musical|Music|Mystery|News|Reality|TV|Romance|Sci-Fi|Short|Sport|Talk-Show|Thriller|War|Western){1,3}/i.test(generoPel)) return console.error(`Se debe seleccionar un genero disponible`);

    if(typeof calificacion!== "number") return console.error(`La calificacion: ${calificacion}. Tiene que ser un número entero o decimal de un solo digito.`);

    if(calificacion<=0||calificacion>10||!/^(\d+)?([.]?\d{0,1})?$/.test(calificacion.toString())) return console.error('La calificacion tiene que ser un número entre 1 y el 10 con solo un digito despues de la coma');
    
    return new Pelicula(id,titulo,director,anoesDeEstreno,paisOrigen,generoPel,calificacion);

}

//validar()
//validar("","","","","","","","")
//validar("ui12","","","","","","")
//validar("uisadsasa12","","","","","","")
//validar("uisadsasa1212312","","","","","","")
//validar("uisadsasa1212312","asdcacsxsxaxsimxksmkxmsxkmsmxmskmxkmsmxksmkxmskmxksmkxmskmxksmkxmamxkamdsssssawwwwwwwceadsjiasdjkasjdkwjijdaskdadjaskdasdklasldkdsakdslka","","","","","")
//validar("uisadsasa1212312","skadkdaskdksadakdl","asdñasldñaldañsdsñaddlasddsakdckekckkcskckskcskcksckskcksc","","","","")
//validar("uisadsasa1212312","a","a"," ","","","")
//validar("uisadsasa1212312","a","a",13,"","","")
//validar("uisadsasa1212312","a","a",13000,"","","")
//validar("uisadsasa1212312","a","a",1865.54,"","","")
//validar("uisadsasa1212312","a","a",1865,"","","")
//validar("uisadsasa1212312","a","a",1865,"","","")
//validar("uisadsasa1212312","a","a",1865,[],"","")
//validar("uisadsasa1212312","a","a",1865,[1],"","")
//validar("uisadsasa1212312","a","a",1865,["España"],"","")
//validar("uisadsasa1212312","a","a",1865,["España"],"adventure","")
//validar("uisadsasa1212312","a","a",1865,["España"],["s"],"")
//validar("uisadsasa1212312","a","a",1865,["España"],["adventure"],"")
//validar("uisadsasa1212312","a","a",1865,["España"],["adventure"],0)
//validar("uisadsasa1212312","a","a",1865,["España"],["adventure"],11)
//validar("uisadsasa1212312","a","a",1865,["España"],["adventure"],5.55)
//validar("uisadsasa1212312","a","a",1865,["España"],["adventure"],5.5)

/*&&!/^[0-9]+([,][0-9]+)?$/.test(anoesDeEstreno.toString())*/

let Thor=validar("ui1212312","Thor","Kenneth Branagh",2011,["Estados Unidos"],["Action","Sci-Fi"],7.7)

//Pelicula.generosAceptados()
//Thor.fichaTecnica()

let ireneYYoYMiOtroYo=validar("so4325322","Irene y Yo y Mi Otro Yo","Bobby Farrely",2000,["Estados Unidos"],["Comedy"],8)

//ireneYYoYMiOtroYo.fichaTecnica()

let texasChaisawMassacre = validar("aa1111111","Texas Chaisaw Massacre",'David Blue Garcia',2022,["Estados Unidos"],["Thriller","Horror"],6.6);

//texasChaisawMassacre.fichaTecnica()

//Solucion Jon Mircha:

class Pelicula1{
    constructor({id,titulo,director,estreno,pais,generos,calificacion}){
            this.id = id;
            this.titulo = titulo;
            this.director = director;
            this.estreno = estreno;
            this.pais = pais;
            this.generos = generos;
            this.calificacion = calificacion;

            this.validacionIMDB(id);
            this.validarTitulo(titulo);
            this.validarDirector(director);
            this.validacionEstreno(estreno);
            this.validarPais(pais);
            this.validarGeneros(generos);
            this.validacionCalificacion(calificacion);
        }

        static get listaGeneros(){
            return ["Action", "Adult", "Adventure", "Animation", "Biography", "Comedy", "Crime", "Documentary" ,"Drama", "Family", "Fantasy", "Film Noir", "Game-Show", "History", "Horror", "Musical", "Music", "Mystery", "News", "Reality-TV", "Romance", "Sci-Fi", "Short", "Sport", "Talk-Show", "Thriller", "War", "Western"];
        }

        static generosAceptados(){
            return console.info(`Los géneros aceptados son: ${Pelicula1.listaGeneros.join(',')}`);
        }

        validarCadena(propiedad, valor){

            if(!valor) return console.warn(`${propiedad} "${valor}" esta vacío`);

            if(typeof valor!=="string") return console.error(`${propiedad} "${valor}" ingresado, NO es una cadena de texto`);

            return true;

        }

        validarLongitudCadena(propiedad,valor,longitud){
            if(valor.length>longitud) return console.error(`${propiedad} "${valor}" excede el número de caracteres permitidos ${longitud}`);

            return true;
        }

        validarNumero(propiedad,valor){
            if(!valor) return console.warn(`${propiedad} "${valor}" esta vacio`);

            if(typeof valor!=="number") return console.error(`${propiedad} "${valor}" ingresado, NO es un número`);

            return true;
        }

        validacionIMDB(id){
            if(this.validarCadena("IMDB id",id)){
                if(!(/^([a-z]){2}([0-9]{7})$/.test(id))){
                    return console.error(`IMDB id "${id}" no es valido, debe tener 9 caracteres, los 2 primeros letras minúsculas, las 7 restantes números`);
                }
            }
        }

        validarTitulo(titulo){
            if(this.validarCadena("Título",titulo)){
                this.validarLongitudCadena("Título",titulo,100);
            }
        }

        validarDirector(director){
            if(this.validarCadena("Director",director)){
                this.validarLongitudCadena("Director",director,50);
            }
        }

        validacionEstreno(estreno){
            if(this.validarNumero("Año de Estreno",estreno)){
                if(!(/^[0-9]{4}$/.test(estreno.toString()))){
                    return console.error(`Año de estreno: "${estreno}" no es valido, debe ser un número de 4 dígitos.`);
                }
            }
        }

        validarArreglo(propiedad,valor){
            if(!valor) return console.warn(`${propiedad} NO esta definido`);

            if(!(valor instanceof Array)) return console.error(`${propiedad} "${valor}" NO, es un arreglo`);

            if(valor.length===0) return console.error(`${propiedad} "${valor}" NO, tiene datos`);

            for(ele of valor){
                if(typeof ele !=="string") return console.error(` EL valor ingresado "${ele}", NO es una cadena de texto`);
            }

            return true;
        }

        validarPais(pais){
            this.validarArreglo("Pais",pais);
        }

        validarGeneros(generos){
            this.validarArreglo("Género",generos);

            for(let genero of generos){
                if(!(Pelicula1.listaGeneros.includes(genero))){ console.error(`Género(s) incorrectos: "${generos.join(",")}"`);
                    Pelicula1.generosAceptados();
                }
            }
        }

        validacionCalificacion(calificacion){
            if(this.validarNumero("Calificacion",calificacion)){
                return (calificacion<0||calificacion>10) ? console.error(`La calificacion tiene que estar en un rango entre 0 y 10`): this.calificacion = calificacion.toFixed(1);
            }
        }

        fichaTecnica(){
            console.info(`Ficha Técnica: \nTítulo:"${this.titulo}"\nDirector:"${this.director}"\nAño:"${this.estreno}"\nPaís: "${this.pais.join("-")}"\nGéneros:"${this.generos.join("-")}"\nCalificación: "${this.calificacion}"\nIMDB id: "${this.id}"`);
        }
}

//Pelicula1.generosAceptados()

let peli = new Pelicula1({
    id:"aa1234567",
    titulo: "Título de Peli",
    director: "Director Peli",
    estreno:2020,
    pais:["Mexico"],
    generos: ["Action"],
    calificacion:7.89
})

peli.fichaTecnica()
</script>
</body>
</html>